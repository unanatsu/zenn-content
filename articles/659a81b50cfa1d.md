---
title: "Raspberry Pi 4ã§DokuWikiã‚’å‹•ã‹ã™ï¼ç°¡å˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["raspberrypi", "raspberrypi4", "apache"]
published: true
published_at: 2025-02-11 00:00
---

# 1. ã¯ã˜ã‚ã«
## è¨˜äº‹ã®ç›®çš„
Raspberry Pi 4ã«DokuWikiã‚’å°å…¥ã—ã€æ‰‹è»½ã«å‚™å¿˜éŒ²ã‚’ç®¡ç†ã§ãã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€åˆæœŸè¨­å®šã¾ã§ã‚’è§£èª¬ã—ã¾ã™ã€‚
## DokuWikiã¨ã¯ï¼Ÿ
> DokuWikiã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰æã¨ã—ãªã„ã€ä½¿ã„æ˜“ãæ±ç”¨æ€§ã®é«˜ã„ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ã‚¦ã‚£ã‚­ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã™ã€‚â€‹ãã‚Œã„ã§å¯èª­æ€§ã®é«˜ã„æ§‹æ–‡ã¯åˆ©ç”¨è€…ã«æ„›ã•ã‚Œã¦ã„ã¾ã™ã€‚ ç®¡ç†ãƒ»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»çµ±åˆåŒ–ãŒå®¹æ˜“ãªã¨ã“ã‚ã¯ç®¡ç†è€…ã«å¥½ã¾ã‚Œã¾ã™ã€‚ DokuWiki ã¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡æ©Ÿèƒ½ã¨èªè¨¼ã¸ã®æ¥ç¶šæ©Ÿèƒ½ã‚’å†…è”µã—ã¦ã„ã‚‹ã®ã§ã€ç‰¹ã«ä¼æ¥­ç’°å¢ƒå†…ã§ã®åˆ©ç”¨ã«å‘ã„ã¦ã„ã¾ã™ã€‚ æ´»æ°—ã«æº€ã¡ãŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰å¯„ä¸ã•ã‚ŒãŸè†¨å¤§ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã£ã¦ã€ä¼çµ±çš„ãªã‚¦ã‚£ã‚­ç”¨é€”ã‚’è¶…ãˆãŸåºƒã„ç¯„å›²ã®ä½¿ç”¨æ–¹æ³•ãŒå¯èƒ½ã§ã™ã€‚
> [https://www.dokuwiki.org/ja:dokuwiki](https://www.dokuwiki.org/ja:dokuwiki)
# 2. ç’°å¢ƒ
## Raspberry Pi
https://www.amazon.co.jp/dp/B0891RC99L?ref_=ppx_hzsearch_conn_dt_b_fed_asin_title_1#customerReviews
## OS
### `/etc/os-release`
```bash
root@raspberrypi:~# cat /etc/os-release
PRETTY_NAME="Debian GNU/Linux 12 (bookworm)"
NAME="Debian GNU/Linux"
VERSION_ID="12"
VERSION="12 (bookworm)"
VERSION_CODENAME=bookworm
ID=debian
HOME_URL="https://www.debian.org/"
SUPPORT_URL="https://www.debian.org/support"
BUG_REPORT_URL="https://bugs.debian.org/"
```
### `uname`
```bash
root@raspberrypi:~# uname -a
Linux raspberrypi 6.6.51+rpt-rpi-v8 #1 SMP PREEMPT Debian 1:6.6.51-1+rpt3 (2024-10-08) aarch64 GNU/Linux
```
# 3. Apache2 + PHPã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
> DokuWiki on Debian, Ubuntu and derivative Distributions
> [https://www.dokuwiki.org/install:debian](https://www.dokuwiki.org/install:debian)
```bash
root@raspberrypi:~# apt-get update -y
root@raspberrypi:~# apt-get upgrade -y
root@raspberrypi:~# apt-get install -y php libapache2-mod-php php-xml php-json php-mbstring php-zip php-intl php-gd
```
Apache2ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•
```bash
root@raspberrypi:~# systemctl restart apache2.service
root@raspberrypi:~# systemctl status apache2.service
```
# 4. DokuWikiã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
ã€Œdokuwikiã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
```bash
root@raspberrypi:~# useradd -m dokuwiki -s /bin/bash
root@raspberrypi:~# cat /etc/passwd | grep 'dokuwiki'
dokuwiki:x:1001:1001::/home/dokuwiki:/bin/bash
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®š
```bash
root@raspberrypi:~# passwd dokuwiki
New password:
Retype new password:
passwd: password updated successfully
```
:::message
`useradd`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã‚‹éš›ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã¯ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã¾ã›ã‚“ã€‚`useradd -D` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`HOME_DIR=yes` ã®è¨­å®šãŒãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ãã®ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ã«ã¯ã€-m ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
```bash
root@raspberrypi:~# useradd -D
GROUP=100
HOME=/home
INACTIVE=-1
EXPIRE=
SHELL=/bin/bash
SKEL=/etc/skel
CREATE_MAIL_SPOOL=no
LOG_INIT=yes
```
:::
:::message
> Generally, keep away from `useradd`, use adduser instead.
> Use `-m` instead of `-d`, so the directory will be created for you:
> [https://askubuntu.com/questions/374870/home-directory-not-being-created](https://askubuntu.com/questions/374870/home-directory-not-being-created)
:::
## DokuWikiã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨é…ç½® (/home/dokuwiki/)
DokuWikiã®å®‰å®šç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```bash
dokuwiki@raspberrypi:~ $ wget https://download.dokuwiki.org/src/dokuwiki/dokuwiki-stable.tgz
```
è§£å‡
```bash
dokuwiki@raspberrypi:~ $ tar -xvf dokuwiki-stable.tgz
dokuwiki@raspberrypi:~ $ ls -l
total 4116
drwxr-xr-x 8 dokuwiki dokuwiki    4096 Aug  5  2024 dokuwiki-2024-02-06b
-rw-r--r-- 1 dokuwiki dokuwiki 4206676 Aug  5  2024 dokuwiki-stable.tgz
```
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã®å¤‰æ›´
```bash
dokuwiki@raspberrypi:~ $ mv ./dokuwiki-2024-02-06b/ public_html/
```
`logs`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
```bash
dokuwiki@raspberrypi:~ $ mkdir -p ./public_html/logs/
```
ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®è¨­å®š
```bash
dokuwiki@raspberrypi:~ $ sudo chown -R www-data:www-data /home/dokuwiki/public_html/
dokuwiki@raspberrypi:~ $ sudo chmod -R 755 /home/dokuwiki/public_html/logs/
```
## Apacheã®è¨­å®šå¤‰æ›´ (VirtualHost)
```bash
dokuwiki@raspberrypi:~ $ sudo vim /etc/apache2/sites-available/dokuwiki.conf
<VirtualHost *:80>
    DocumentRoot /home/dokuwiki/public_html

    <Directory /home/dokuwiki/public_html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog /home/dokuwiki/public_html/logs/dokuwiki-error.log
    CustomLog /home/dokuwiki/public_html/logs/dokuwiki-access.log combined
</VirtualHost>
```
`dokuwiki.conf`ã®æœ‰åŠ¹åŒ–
```bash
dokuwiki@raspberrypi:~ $ sudo a2ensite dokuwiki.conf
Enabling site dokuwiki.
To activate the new configuration, you need to run:
  systemctl reload apache2
dokuwiki@raspberrypi:~ $ ls -l /etc/apache2/sites-enabled/dokuwiki.conf
lrwxrwxrwx 1 root root 32 Feb 10 19:48 /etc/apache2/sites-enabled/dokuwiki.conf -> ../sites-available/dokuwiki.conf
```
ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹
```http://<RaspberryPiã®IPã‚¢ãƒ‰ãƒ¬ã‚¹>/```
Apacheã®Welcomeãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
```bash
dokuwiki@raspberrypi:~ $ sudo apache2ctl -S
AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.            1. Set the 'ServerName' directive globally to suppress this message
VirtualHost configuration:
*:80                   is a NameVirtualHost
         default server 127.0.1.1 (/etc/apache2/sites-enabled/000-default.conf:1)
         port 80 namevhost 127.0.1.1 (/etc/apache2/sites-enabled/000-default.conf:1)
         port 80 namevhost 127.0.1.1 (/etc/apache2/sites-enabled/dokuwiki.conf:1)
ServerRoot: "/etc/apache2"
Main DocumentRoot: "/var/www/html"
Main ErrorLog: "/var/log/apache2/error.log"
Mutex default: dir="/var/run/apache2/" mechanism=default
Mutex mpm-accept: using_defaults
Mutex watchdog-callback: using_defaults
PidFile: "/var/run/apache2/apache2.pid"
Define: DUMP_VHOSTS
Define: DUMP_RUN_CFG
User: name="www-data" id=33
Group: name="www-data" id=33
```
`000-default.conf`ï¼ˆApacheã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä»®æƒ³ãƒ›ã‚¹ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ãŒå„ªå…ˆçš„ã«èª­ã¿è¾¼ã¾ã‚Œã€`dokuwiki.conf`ã®`DocumentRoot`ãŒä¸Šæ›¸ãã•ã‚Œã¦ã„ã‚‹ã€‚

`000-default.conf`ã‚’ç„¡åŠ¹åŒ–
```bash
dokuwiki@raspberrypi:~ $ sudo a2dissite 000-default.conf
Site 000-default disabled.
To activate the new configuration, you need to run:
  systemctl reload apache2
```
è¨­å®šã‚’åæ˜ ã•ã›ã‚‹ãŸã‚ã«ã€Apache2ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†èª­ã¿è¾¼ã¿ã™ã‚‹ã€‚
```bash
dokuwiki@raspberrypi:~ $ sudo systemctl reload apache2.service
```
å†åº¦ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹
```http://<RaspberryPiã®IPã‚¢ãƒ‰ãƒ¬ã‚¹>/```
# 5. DokuWikiã®åˆæœŸè¨­å®š
## Webã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‹ã‚‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
DokuWikiã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹
```http://<RaspberryPiã®IPã‚¢ãƒ‰ãƒ¬ã‚¹>/install.php```
å³ä¸Šã®ã€Œä½¿ç”¨è¨€èªã‚’é¸æŠã€ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œjaã€ã‚’é¸æŠã™ã‚‹ã€‚
![](/images/659a81b50cfa1d/202502102004_dokuwiki-installer.png)
### ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
![](/images/659a81b50cfa1d/202502102220_dokuwiki-create-user.png)
`ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼`: ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’è¨­å®š
`ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹`: ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«é–¢é€£ä»˜ã‘ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
`ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰`: ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«å¯¾å¿œã™ã‚‹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š
`ACLåˆæœŸè¨­å®š`: Wikiã‚’ç·¨é›†ã§ãã‚‹äººã®ç¯„å›²ã‚’è¨­å®š
### ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®é¸æŠ
ã‚ˆãåˆ†ã‹ã‚‰ãªã‘ã‚Œã°ä¸€ç•ªä¸‹ã®ã€Œãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã›ã‚“ã€‚ã€ã‚’é¸æŠã—ã¦å•é¡Œãªã„ã€‚
![](/images/659a81b50cfa1d/202502102227_dokuwiki-select-license.png)
è¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€Œä¿å­˜ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚

`install.php`ã¯ä¸è¦ã«ãªã‚‹ã®ã§å‰Šé™¤ã—ã¦æ§‹ã‚ãªã„ã€‚
```bash
dokuwiki@raspberrypi:~ $ sudo rm ./public_html/install.php
```

# 6. ã¾ã¨ã‚
- DokuWikiã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã›ãšã«å‹•ä½œã™ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®Wikiã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚‹ã€‚
- ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªæ“ä½œãŒå¯èƒ½ã§ã€å€‹äººã‚„ãƒãƒ¼ãƒ ã®æƒ…å ±ç®¡ç†ã«é©ã—ã¦ã„ã‚‹ã€‚
- ä»Šå›ã¯ã€Raspberry Pi 4ã«DokuWikiã®å®‰å®šç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€æ‰‹è»½ã«å‚™å¿˜éŒ²ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†ãŒã§ãã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã—ãŸã€‚